<!DOCTYPE html>
<html>
<head>
    <title>Password Generator</title>
</head>
<body>
    <div>
        <h1>Generate password!</h1>
        <h4>Tired of remembering passwords?</h4>
        <table>
            <tr>
                <td>Passphrase:</td>
                <td><input id="passphrase" type="text" value="billy.milligan"></td>
            </tr>
            <tr>
                <td>Site:</td>
                <td><input id="site" type="text" value="google.com"></td>
            </tr>
            <tr>
                <td>Your password:</td>
                <td><span id="password">MTA5NDU1NDUzNw</span></td>
            </tr>
        </table>
    </div>
    <script>
        (function(){
            function parseReferrer( url ) {
                var a = document.createElement('a');
                a.href = url;
                return a;
            }

            function generate( e ) {
                password.innerText = btoa(hash( passphrase.value + "@" + site.value )).replace(/=/g,"");
            }

            if( document.referrer ) {
               site.innerText = parseReferrer( document.referrer ).hostname;
            }

            function hash( sicret ) {
                var hash = 0, i, chr;
                if (sicret.length === 0) return hash;
                for (i = 0; i < sicret.length; i++) {
                    chr   = sicret.charCodeAt(i);
                    hash  = ((hash << 5) - hash) + chr;
                    hash |= 0; // Convert to 32bit integer
                }
                return hash;
            }

            passphrase.addEventListener( "change", generate );
            passphrase.addEventListener( "keydown", generate );
            site.addEventListener( "change", generate );
            site.addEventListener( "keydown", generate );
        })();
    </script>
</body>
</html>